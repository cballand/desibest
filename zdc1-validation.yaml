title: 'Redshift Data Challenge 1 Validation Results'

# Specify the grid for each 8.5" x 11" page of plots.  The grid must
# be large enough to show results from all fitters on one page.
rows: 2
cols: 3

# Base path that is prepended to all non-absolute paths below.
# This path assumes you are running at NERSC.
base: /project/projectdirs/desi/datachallenge/zdc1

# Define the target classes to summarize.  For each class, specify:
#
#   truth: FITS file containing sample truth, including TRUEZ.
#   max_dv: maximum allowed 68% sample error on dv in km/s.
#   catastrophic: threshold in km/s where a fit with ZWARN=0 is considered bad.
#   max_frac: maximum allowed fraction of bad fits.
#   plots: dictonary of plots to generate for this target class.
#
# Each plot displays dv (left hand) and failed fit fractions (right hand)
# versus the truth parameter named in the plot key, which must match one of the
# truth colunns loaded above. Plots are further specified by:
#
#   n: Number of slices to use for calculating percentile statistics.
#   min: Minimum value of the truth parameter to display.
#   max: Maximum value of the truth parameter to display.
#   label: Descriptive label of the truth parameter to use in the x-axis label.
#   overlap: Number of x-axis labels to hide to avoid overlapping the next plot.
#
# The vertical scales used for each plot are controlled by max_dv (left-hand)
# and max_frac (right-hand).
classes:
    ELG:
        truth: samples/validation_truth/truth-brick-b-valid-elg-5000.fits
        max_dv: 150 # km/s
        catastrophic: 1000 # km/s
        max_frac: 0.1
        plots:
            TRUEZ: { n: 15, min: 0.6, max: 1.6, label: 'redshift', overlap: 1 }
            RMAG: { n: 12, min: 21.0, max: 23.4, label: 'r-band magnitude', overlap: 0 }
            OIIFLUX: { n: 10, min: 0.0, max: 4.0e-16, label: '[OII] flux', overlap: 1 }
    LRG:
        truth: samples/validation_truth/truth-brick-b-valid-lrg-5000.fits
        max_dv: 150 # km/s
        catastrophic: 1000 # km/s
        max_frac: 0.05
        plots:
            TRUEZ: { n: 12, min: 0.5, max: 1.0, label: 'redshift', overlap: 2 }
            ZMAG: { n: 15, min: 19.0, max: 20.5, label: 'z-band magnitude', overlap: 2 }
    QSO:
        truth: samples/validation_truth/truth-brick-b-valid-qso-5000.fits
        max_dv: 750 # km/s
        catastrophic: 1000 # km/s
        max_frac: 0.1
        plots:
            TRUEZ: { n: 14, min: 0.5, max: 4.0, label: 'redshift', overlap: 1 }
            GMAG: { n: 16, min: 21.0, max: 23.0, label: 'g-band magnitude', overlap: 1 }
    STAR:
        truth: samples/validation_truth/truth-brick-b-valid-star-5000.fits
        max_dv: 75 # km/s
        catastrophic: 1000 # km/s
        max_frac: 0.05
        plots:
            TRUEZ: { n: 16, min: -0.0016, max: 0.0016, label: 'redshift', overlap: 1 }
            RMAG: { n: 15, min: 18.0, max: 23.0, label: 'r-band magnitude', overlap: 1 }

# Specify the ZBEST files to use for each combination of fitter and target
# class.  A fitter does not need to provide a ZBEST file for all target classes
# defined above.
zbest:
    redrock:
        ELG: results/redrock/zbest-validation-elg-5000-rr.fits
        LRG: results/redrock/zbest-validation-lrg-5000-rr.fits
        QSO: results/redrock/zbest-validation-qso-5000-rr.fits
    bayez:
        ELG: results/bayez/bayez_elg_valid_5k.fits
        LRG: results/bayez/bayez_lrg_valid_5k.fits
        QSO: results/bayez/bayez_qso_valid_5k.fits
        STAR: results/bayez/bayez_star_valid_5k.fits
    zpy-pure:
        ELG: results/zpy/purity_optimized/zbest-valid-elg-5000-zpy.fits
        LRG: results/zpy/purity_optimized/zbest-valid-lrg-5000-zpy.fits
        QSO: results/zpy/purity_optimized/zbest-valid-qso-5000-zpy.fits
        STAR: results/zpy/purity_optimized/zbest-valid-star-5000-zpy.fits
    zpy-complete:
        ELG: results/zpy/completion_optimized/zbest-valid-elg-5000-zpy.fits
        LRG: results/zpy/completion_optimized/zbest-valid-lrg-5000-zpy.fits
        QSO: results/zpy/completion_optimized/zbest-valid-qso-5000-zpy.fits
        STAR: results/zpy/completion_optimized/zbest-valid-star-5000-zpy.fits
    zztop:
        ELG: results/zztop/zbest-valid-elg-5000-zztop.fits
